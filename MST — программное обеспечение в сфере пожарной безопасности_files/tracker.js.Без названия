/*
 *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
**************************************************************************** @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   4.0.5
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(g){var b=0;return function(){return b<g.length?{done:!1,value:g[b++]}:{done:!0}}};$jscomp.arrayIterator=function(g){return{next:$jscomp.arrayIteratorImpl(g)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(g,b,d){if(g==Array.prototype||g==Object.prototype)return g;g[b]=d.value;return g};$jscomp.getGlobal=function(g){g=["object"==typeof globalThis&&globalThis,g,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<g.length;++b){var d=g[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(g,b){var d=$jscomp.propertyToPolyfillSymbol[b];if(null==d)return g[b];d=g[d];return void 0!==d?d:g[b]};
$jscomp.polyfill=function(g,b,d,a){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(g,b,d,a):$jscomp.polyfillUnisolated(g,b,d,a))};$jscomp.polyfillUnisolated=function(g,b,d,a){d=$jscomp.global;g=g.split(".");for(a=0;a<g.length-1;a++){var c=g[a];if(!(c in d))return;d=d[c]}g=g[g.length-1];a=d[g];b=b(a);b!=a&&null!=b&&$jscomp.defineProperty(d,g,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(g,b,d,a){var c=g.split(".");g=1===c.length;a=c[0];a=!g&&a in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var h=0;h<c.length-1;h++){var m=c[h];if(!(m in a))return;a=a[m]}c=c[c.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?a[c]:null;b=b(d);null!=b&&(g?$jscomp.defineProperty($jscomp.polyfills,c,{configurable:!0,writable:!0,value:b}):b!==d&&(void 0===$jscomp.propertyToPolyfillSymbol[c]&&($jscomp.propertyToPolyfillSymbol[c]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(c):
$jscomp.POLYFILL_PREFIX+c),c=$jscomp.propertyToPolyfillSymbol[c],$jscomp.defineProperty(a,c,{configurable:!0,writable:!0,value:b})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(g){if(g)return g;var b=function(c,h){this.$jscomp$symbol$id_=c;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:h})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var d=0,a=function(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(c||"")+"_"+d++,c)};return a},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(g){if(g)return g;g=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),d=0;d<b.length;d++){var a=$jscomp.global[b[d]];"function"===typeof a&&"function"!=typeof a.prototype[g]&&$jscomp.defineProperty(a.prototype,g,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return g},"es6",
"es3");$jscomp.iteratorPrototype=function(g){g={next:g};g[Symbol.iterator]=function(){return this};return g};
!function(g){function b(a){if(d[a])return d[a].exports;var c=d[a]={i:a,l:!1,exports:{}};return g[a].call(c.exports,c,c.exports,b),c.l=!0,c.exports}var d={};b.m=g;b.c=d;b.d=function(a,c,h){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:h})};b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})};b.t=function(a,c){if((1&c&&(a=b(a)),8&c)||4&c&&"object"==typeof a&&a&&a.__esModule)return a;
var h=Object.create(null);if(b.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:a}),2&c&&"string"!=typeof a)for(var m in a)b.d(h,m,function(k){return a[k]}.bind(null,m));return h};b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c};b.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};b.p="";b(b.s=0)}([function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});var a=d(1);d(2);var c=d(3),h=d(3),m=d(4);d(13);
var k=d(18),u=d(19),r=d(20),n=d(22),p=d(23),y=d(9),E=d(27);d(26);var C=d(17);g=function(){function H(e){var f=this;this._previousRequestPromise=null;this.createRequestsCounter=0;this.process=function(){for(var t=[],A=0;A<arguments.length;A++)t[A]=arguments[A];t=Array.prototype.slice.call(t);f.invoke(t.shift(),t)};this.isPrerenderOrPreview=function(){var t=f._window.document.visibilityState||f._window.document.webkitVisibilityState||"visible";return"preview"==t||"prerender"==t};this.invoke=function(t,
A){try{if(!t)throw Error("methodName required");if("create"!==t&&!f._settings)throw Error('You should call "create" first');if("create"===t||f._cookieManager.isCookieEnabled()&&!f.isPrerenderOrPreview()){if("create"===t)return void f.tryCreate(A[0]);var O=f.moduleManager.tryGetModuleCommand(t);if(null!=O)return void f.moduleManager.invokeModule(O,A);var U=t.replace(".","_");if(void 0===f[U])throw Error("Unknown method: "+U);A instanceof Array?f.then(function(){return f[U].apply(f,A)}):f.then(function(){return f[U].call(f,
A)})}}catch(q){f.logErrorTracker(q)}};this.then=function(t){f._sessionStorage.deviceUUIDIsSet()?t().then(void 0,function(A){return f.logErrorTracker(A)}):null==f._previousRequestPromise?f._previousRequestPromise=t().then(void 0,function(A){return f.logErrorTracker(A)}):f._previousRequestPromise=f._previousRequestPromise.then(function(){return t()}).then(void 0,function(A){return f.logErrorTracker(A)})};this.getTrackerAdditionalData=function(){var t=null;try{t=f._sessionStorage.tryGetDeviceUUID()}catch(A){}return{Version:c.version,
"Point of contact":f._settings.pointOfContactSystemName,Endpoint:f._settings.endpointId,Origin:location.origin,DeviceUUID:t}};this.logErrorTracker=function(t,A){var O=f.getTrackerAdditionalData();t.requestId&&(O.RequestId=t.requestId);f._logger.logError(t,a.__assign(a.__assign({},O),A))};this.trackEventWithDataFromTracker=function(t,A){var O=f.getTrackerAdditionalData();f._logger.trackEvent(t,a.__assign(a.__assign({},O),A))};this.tryCreate=function(t){(++f.createRequestsCounter,f._previousRequestPromise)?
(t=n.compareSettings(f._settings,t),null!=t&&f.logErrorTracker(new C.MultipleCallsToCreateError(t))):f.create(t)};this.create=function(t){f._settings=t||{};null==f._settings.serviceDomain||"tracker.dashamail.com"===f._settings.serviceDomain?f._settings.serviceDomain=h.getDefaultServiceDomain():"tracker.dashamail.com"===f._settings.serviceDomain&&(f._settings.serviceDomain="directcrm.dashamail.com");f._window=f._settings.windowOverride?f._settings.windowOverride:window;f._cookieManager=new k.Manager(f._window);
f._cookieManager.setBaseDomain();f._sessionStorage=new u.CustomerSessionStorage(f._cookieManager,f._window);f._sender=new m.RequestSender(f._sessionStorage,f._settings.serviceDomain,f._settings.projectDomain,f._settings.useHttp,f._settings.crossDomainRequestFactoryOverride);f._logger=null==f._settings.loggerOverride?new r.TrackerLogger:f._settings.loggerOverride;f.timeZoneProvider=null==f._settings.timeZoneProviderOverride?new E.IanaTimeZoneProvider:f._settings.timeZoneProviderOverride;if(f.moduleManager=
new p.ModuleManager(f._settings,f._sessionStorage,function(){return f._previousRequestPromise},{logError:f.logErrorTracker,trackEvent:f.trackEventWithDataFromTracker}),f._cookieManager.isCookieEnabled()&&!f.isPrerenderOrPreview())t=null!=f._window.location.search&&-1!==f._window.location.search.indexOf("s="),f._previousRequestPromise=t?f.nextAttempt():f.trackVisit()};this.nextAttempt=function(){return f.trackVisit()};this.validateOperationParameters=function(t){if(!t)throw Error("parameters required");
if(!t.operation)throw Error("operation required");};this.createRequest=function(t){var A={originDomain:f._window.location.host,deviceUUID:f._sessionStorage.tryGetDeviceUUID(),operation:t.operation,ianaTimeZone:f.timeZoneProvider.tryGetTimeZone()};if(localStorage.DashaPushID){A.DashaPushID = localStorage.DashaPushID;};return null!=f._settings.endpointId&&(A.endpointId=f._settings.endpointId),t.data&&(A.data=JSON.stringify(t.data)),{request:A,additionalParameters:Object.keys(t).filter(function(O){return"operation"!=O&&"data"!=O&&"onSuccess"!=O&&"onValidationError"!=O&&
"onError"!=O}).map(function(O){return{name:O,value:t[O]}})}};this.fillWithData=function(t){var A=f._sessionStorage.tryGetDeviceUUID();if(null!=A&&""!=A)if("undefined"!=A)t.session={deviceGuid:A};else{f.logErrorTracker(Error("deviceUUID = "+A));f._cookieManager.remove("dashamailDeviceUUID");f._cookieManager.remove("DM-session");try{f._window.localStorage.removeItem("DM-session")}catch(O){}}t.options={pointOfContactSystemName:f._settings.pointOfContactSystemName};null!=f._settings.endpointId&&(t.endpointId=
f._settings.endpointId);t.originDomain=f._window.document.location.host;try{if (localStorage.DashaPushID){t.session.DashaPushID = localStorage.DashaPushID;};}catch(O){};try{t.screenResolution=window.screen.width+"x"+window.screen.height}catch(O){}};try{this._previousRequestPromise=void 0;for(var J=0;J<e.length;++J)"create"==(P=Array.prototype.slice.call(e[J]))[0]&&(this.invoke(P.shift(),P),e.splice(J,1));for(J=0;J<e.length;++J){var P=Array.prototype.slice.call(e[J]);this.invoke(P.shift(),P)}}catch(t){this.logErrorTracker(t)}}return H.initialize=function(){if(window.dashamailInitialized)throw Error("Multiple attepmts to initialize tracker. Look for duplicate dashamail script-blocks.");
var e=new H(null!=window.dashamail&&null!=window.dashamail.queue?window.dashamail.queue:null!=window.mindbox&&null!=window.mindbox.Queue?window.mindbox.Queue:[]);window.dashamail=e.process;window.dashamailInitialized=!0;window.mindbox=e.process},H.dispose=function(){delete window.dashamail;delete window.dashamailInitialized;delete window.mindbox},H.prototype.trackVisit=function(){var e={requestUrl:this._window.document.location.href,referrerUrl:this._window.document.referrer,ianaTimeZone:this.timeZoneProvider.tryGetTimeZone()};
return this._settings.redirectedFrom&&(this._settings.redirectedFrom.requestUrl||this._settings.redirectedFrom.referrerUrl)&&(e.redirectedFrom={requestUrl:this._settings.redirectedFrom.requestUrl,referrerUrl:this._settings.redirectedFrom.referrerUrl}),this.fillWithData(e),this._sender.sendToTracker("/v1.1/customer/track-visit.php",e)},H.prototype.sync=function(e){var f=this;if(this.validateOperationParameters(e),e.onSuccess&&"function"!=typeof e.onSuccess)throw Error("onSuccess should be a function");
if(e.onValidationError&&"function"!=typeof e.onValidationError)throw Error("onValidationError should be a function");if(e.onError&&"function"!=typeof e.onError)throw Error("onError should be a function");var J=this.createRequest(e),P=function(t){e.onError&&e.onError(t);f.logErrorTracker(t)};return this._sender.sendToTrackerGetData("/v3/js/operations/sync.php",J.request,J.additionalParameters).then(function(t){if(y.ServiceResponses.isSuccess(t))e.onSuccess&&(t=a.__assign({},t),delete t.deviceUUID,
delete t.requestId,delete t.status,e.onSuccess(t));else if(y.ServiceResponses.isValidationError(t))if(e.onValidationError)e.onValidationError(t.validationMessages);else t={name:"Unhandled validation error",message:JSON.stringify(t.validationMessages),requestId:t.requestId},P(t);else P({name:"Malformed server response",message:JSON.stringify(t)})},P)},H.prototype.async=function(e){var f=this;if(this.validateOperationParameters(e),e.onSuccess&&"function"!=typeof e.onSuccess)throw Error("onSuccess should be a function");
if(e.onError&&"function"!=typeof e.onError)throw Error("onError should be a function");var J=this.createRequest(e);return this._sender.sendToTracker("/v3/js/operations/async.php",J.request,J.additionalParameters).then(function(){e.onSuccess&&e.onSuccess()},function(P){e.onError&&e.onError(P);f.logErrorTracker(P)})},H.prototype.identify=function(e){var f=this;if(!e)throw Error("parameters required");if(!e.operation)throw Error("operation required");if(!e.identificator)throw Error("identificator required");
if(!e.identificator.provider)throw Error("provider required");if(!e.identificator.identity)throw Error("identity required");var J={operation:e.operation,identity:e.identificator.identity,provider:e.identificator.provider,ianaTimeZone:this.timeZoneProvider.tryGetTimeZone()};e.data&&(J.data=JSON.stringify(e.data));this.fillWithData(J);var P=e.success&&"function"==typeof e.success?e.success:function(){},t=e.error&&"function"==typeof e.error?e.error:function(A){};return this._sender.sendToTracker("/v1.1/customer/identify.php",
J).then(P,function(A){t(A);f.logErrorTracker(A)})},H.prototype.performOperation=function(e){var f=this;if(!e)throw Error("parameters required");var J=e.success&&"function"==typeof e.success?e.success:function(){},P=e.error&&"function"==typeof e.error?e.error:function(A){},t={operationSystemName:"string"==typeof e?e:e.operation};return this.fillWithData(t),e.data&&(t.data=JSON.stringify(e.data)),this._sender.sendToTracker("/v1.1/customer/track-event.php",t).then(J,function(A){P(A);f.logErrorTracker(A)})},
H.prototype.closeSession=function(){var e={};return this.fillWithData(e),this._sender.sendToTracker("/v1.1/customer/close-session.php",e)},H.prototype.order_create=function(e){e={order:e};return this.fillWithData(e),this._sender.sendToTracker("/v1.1/order/create.php",e)},H.prototype.cart_addProduct=function(e){e={item:e};return this.fillWithData(e),this._sender.sendToTracker("/v1.1/cart/add-product.php",e)},H.prototype.cart_removeProduct=function(e){e={item:e};return this.fillWithData(e),this._sender.sendToTracker("/v1.1/cart/remove-product.php",
e)},H.prototype.cart_setProductQuantity=function(e){e={item:e};return this.fillWithData(e),this._sender.sendToTracker("/v1.1/cart/set-product-quantity.php",e)},H.prototype.cart_clear=function(){var e={};return this.fillWithData(e),this._sender.sendToTracker("/v1.1/cart/clear.php",e)},H}();b.Tracker=g;g.initialize()},function(g,b,d){function a(q,w){function x(){this.constructor=q}O(q,w);q.prototype=null===w?Object.create(w):(x.prototype=w.prototype,new x)}function c(q,w){var x={},D;for(D in q)Object.prototype.hasOwnProperty.call(q,
D)&&0>w.indexOf(D)&&(x[D]=q[D]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var B=0;for(D=Object.getOwnPropertySymbols(q);B<D.length;B++)0>w.indexOf(D[B])&&Object.prototype.propertyIsEnumerable.call(q,D[B])&&(x[D[B]]=q[D[B]])}return x}function h(q,w,x,D){var B,z=arguments.length,L=3>z?w:null===D?D=Object.getOwnPropertyDescriptor(w,x):D;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)L=Reflect.decorate(q,w,x,D);else for(var K=q.length-1;0<=K;K--)(B=q[K])&&(L=(3>z?
B(L):3<z?B(w,x,L):B(w,x))||L);return 3<z&&L&&Object.defineProperty(w,x,L),L}function m(q,w){return function(x,D){w(x,D,q)}}function k(q,w){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(q,w)}function u(q,w,x,D){return new (x||(x=Promise))(function(B,z){function L(R){try{T(D.next(R))}catch(F){z(F)}}function K(R){try{T(D["throw"](R))}catch(F){z(F)}}function T(R){R.done?B(R.value):(new x(function(F){F(R.value)})).then(L,K)}T((D=D.apply(q,w||[])).next())})}function r(q,
w){function x(T){return function(R){return function(F){if(D)throw new TypeError("Generator is already executing.");for(;K;)try{if(D=1,B&&(z=2&F[0]?B["return"]:F[0]?B["throw"]||((z=B["return"])&&z.call(B),0):B.next)&&!(z=z.call(B,F[1])).done)return z;switch(B=0,z&&(F=[2&F[0],z.value]),F[0]){case 0:case 1:z=F;break;case 4:return K.label++,{value:F[1],done:!1};case 5:K.label++;B=F[1];F=[0];continue;case 7:F=K.ops.pop();K.trys.pop();continue;default:if(!(z=0<(z=K.trys).length&&z[z.length-1])&&(6===F[0]||
2===F[0])){K=0;continue}if(3===F[0]&&(!z||F[1]>z[0]&&F[1]<z[3]))K.label=F[1];else if(6===F[0]&&K.label<z[1])K.label=z[1],z=F;else if(z&&K.label<z[2])K.label=z[2],K.ops.push(F);else{z[2]&&K.ops.pop();K.trys.pop();continue}}F=w.call(q,K)}catch(Q){F=[6,Q],B=0}finally{D=z=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([T,R])}}var D,B,z,L,K={label:0,sent:function(){if(1&z[0])throw z[1];return z[1]},trys:[],ops:[]};return L={next:x(0),"throw":x(1),"return":x(2)},"function"==typeof Symbol&&
(L[Symbol.iterator]=function(){return this}),L}function n(q,w){for(var x in q)w.hasOwnProperty(x)||(w[x]=q[x])}function p(q){var w="function"==typeof Symbol&&q[Symbol.iterator],x=0;return w?w.call(q):{next:function(){return q&&x>=q.length&&(q=void 0),{value:q&&q[x++],done:!q}}}}function y(q,w){var x="function"==typeof Symbol&&q[Symbol.iterator];if(!x)return q;var D,B=x.call(q),z=[];try{for(;(void 0===w||0<w--)&&!(D=B.next()).done;)z.push(D.value)}catch(K){var L={error:K}}finally{try{D&&!D.done&&(x=
B["return"])&&x.call(B)}finally{if(L)throw L.error;}}return z}function E(){for(var q=[],w=0;w<arguments.length;w++)q=q.concat(y(arguments[w]));return q}function C(){for(var q=0,w=0,x=arguments.length;w<x;w++)q+=arguments[w].length;q=Array(q);var D=0;for(w=0;w<x;w++)for(var B=arguments[w],z=0,L=B.length;z<L;z++,D++)q[D]=B[z];return q}function H(q){return this instanceof H?(this.v=q,this):new H(q)}function e(q,w,x){function D(Q){R[Q]&&(T[Q]=function(V){return new Promise(function(W,Z){1<F.push([Q,V,
W,Z])||B(Q,V)})})}function B(Q,V){try{(W=R[Q](V)).value instanceof H?Promise.resolve(W.value.v).then(z,L):K(F[0][2],W)}catch(Z){K(F[0][3],Z)}var W}function z(Q){B("next",Q)}function L(Q){B("throw",Q)}function K(Q,V){Q(V);F.shift();F.length&&B(F[0][0],F[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,R=x.apply(q,w||[]),F=[];return T={},D("next"),D("throw"),D("return"),T[Symbol.asyncIterator]=function(){return this},T}function f(q){function w(B,z){x[B]=
q[B]?function(L){return(D=!D)?{value:H(q[B](L)),done:"return"===B}:z?z(L):L}:z}var x,D;return x={},w("next"),w("throw",function(B){throw B;}),w("return"),x[Symbol.iterator]=function(){return this},x}function J(q){function w(B){x[B]=q[B]&&function(z){return new Promise(function(L,K){(function(T,R,F,Q){Promise.resolve(Q).then(function(V){T({value:V,done:F})},R)})(L,K,(z=q[B](z)).done,z.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var x,D=q[Symbol.asyncIterator];
return D?D.call(q):(q=p(q),x={},w("next"),w("throw"),w("return"),x[Symbol.asyncIterator]=function(){return this},x)}function P(q,w){return Object.defineProperty?Object.defineProperty(q,"raw",{value:w}):q.raw=w,q}function t(q){if(q&&q.__esModule)return q;var w={};if(null!=q)for(var x in q)Object.hasOwnProperty.call(q,x)&&(w[x]=q[x]);return w["default"]=q,w}function A(q){return q&&q.__esModule?q:{"default":q}}d.r(b);d.d(b,"__extends",function(){return a});d.d(b,"__assign",function(){return U});d.d(b,
"__rest",function(){return c});d.d(b,"__decorate",function(){return h});d.d(b,"__param",function(){return m});d.d(b,"__metadata",function(){return k});d.d(b,"__awaiter",function(){return u});d.d(b,"__generator",function(){return r});d.d(b,"__exportStar",function(){return n});d.d(b,"__values",function(){return p});d.d(b,"__read",function(){return y});d.d(b,"__spread",function(){return E});d.d(b,"__spreadArrays",function(){return C});d.d(b,"__await",function(){return H});d.d(b,"__asyncGenerator",function(){return e});
d.d(b,"__asyncDelegator",function(){return f});d.d(b,"__asyncValues",function(){return J});d.d(b,"__makeTemplateObject",function(){return P});d.d(b,"__importStar",function(){return t});d.d(b,"__importDefault",function(){return A});var O=function(q,w){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,D){x.__proto__=D}||function(x,D){for(var B in D)D.hasOwnProperty(B)&&(x[B]=D[B])})(q,w)},U=function(){return(U=Object.assign||function(q){for(var w,x=1,D=arguments.length;x<D;x++)for(var B in w=
arguments[x])Object.prototype.hasOwnProperty.call(w,B)&&(q[B]=w[B]);return q}).apply(this,arguments)}},function(g,b){!function(d){d.console=d.console||{};var a;d=d.console;for(var c={},h=function(){},m=["memory"],k="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");a=m.pop();)d[a]||(d[a]=c);for(;a=k.pop();)d[a]||(d[a]=h)}("undefined"==typeof window?
this:window)},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});b.version="0.1.1";b.getDefaultServiceDomain=function(){return"directcrm.dashamail.com"}},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});var a=d(5),c=d(3),h=d(11);g=function(){function m(k,u,r,n,p){this._sessionStorage=k;this._serviceDomain=u;this._projectDomain=r;this._useHttp=n||!1;this._crossDomainRequestFactory=p||a.CrossDomainRequestFactory}return m.prototype.getProtocol=function(){return this._useHttp?
"http://":"https://"},m.prototype.sendToTracker=function(k,u,r){var n=this;k=this.createCrossDomainRequest(h.HttpMethods.POST,this._serviceDomain+k,u,r);return this._sessionStorage.deviceUUIDIsSet()&&this._sessionStorage.isUsingDeviceUUIDInLocalStorage()?k.sendAndForget():k.sendAndGetResult().then(function(p){return n.processResponse(p)})},m.prototype.sendToTrackerGetData=function(k,u,r){var n=this;return this.createCrossDomainRequest(h.HttpMethods.POST,this._serviceDomain+k,u,r).sendAndGetResult().then(function(p){return n.processResponse(p),
p})},m.prototype.sendToTrackerWithoutSessionAndGetResult=function(k,u){return this.createCrossDomainRequest(h.HttpMethods.POST,this._serviceDomain+k,u).sendAndGetResult()},m.prototype.createCrossDomainRequest=function(k,u,r,n){return u=this.getProtocol()+u+(u.match(/\?/)?"&":"?")+"version="+c.version,n&&0<n.length&&(u+="&"+n.map(function(p){return p.name+"="+p.value}).join("&")),this._crossDomainRequestFactory(k,u,r)},m.prototype.processResponse=function(k){if(!k.deviceUUID)throw Error("Uncorrect server response: "+
JSON.stringify(k));this._sessionStorage.setDeviceUUID(k.deviceUUID)},m}();b.RequestSender=g},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});var a=d(6),c=d(9),h=d(11),m=d(12),k=d(13);b.CrossDomainRequestFactory=function(r,n,p){return new u(r,n,p)};var u=function(){function r(n,p,y){this.timeout=6E4;this._httpMethod=n;this._url=p;this._payload=m.PayloadSerializer.serialize(y)}return r.prototype.sendAndGetResult=function(){var n=this.sendViaXmlHttpRequest()||this.sendViaJsonp();if(null==
n)throw Error("Browser doesn't support big cross domain requests.");return n},r.prototype.sendAndForget=function(){var n=this.sendViaBeacon()||this.sendViaImage()||this.sendViaXmlHttpRequest();if(null==n)throw Error("Browser doesn't support big cross domain requests.");return n},r.prototype.sendViaBeacon=function(){var n=r.appendQueryString(this._url,"transport=beacon");try{return void 0!==navigator.sendBeacon&&navigator.sendBeacon(n,this._payload)?a.Promise.resolve():null}catch(p){return null}},
r.prototype.sendViaImage=function(){var n=this,p=r.appendQueryString(this._url,"transport=image&"+this._payload);if(p.length>r.maxUrlLength)return null;var y=document.createElement("img");y.width=1;y.height=1;y.src=p;p=new a.Promise(function(C,H){y.onload=y.onerror=function(e){y.onload=null;y.onerror=null;C()}});var E=new a.Promise(function(C,H){setTimeout(function(){return H(new k.Timeout("Timeout in sendViaImage."))},n.timeout)});return a.Promise.race([p,E])},r.prototype.sendViaJsonp=function(){var n=
this,p="dashamail_jsonp_"+r.jsonpRequestNumber++,y=p+"resolve",E=r.appendQueryString(this._url,"transport=jsonp&"+this._payload+'&jsonpCallback=window["'+p+'"]');if(E.length>r.maxUrlLength)return null;var C=document.createElement("script");C.type="text/javascript";C.src=E;E=new a.Promise(function(e){window[y]=e;window[p]=function(f){try{window[y](f)}finally{document.getElementsByTagName("head")[0].removeChild(C);C=null;try{delete window[p],delete window[y]}catch(J){window[p]=void 0,window[y]=void 0}}}});
document.getElementsByTagName("head")[0].appendChild(C);var H=new a.Promise(function(e,f){setTimeout(function(){f(new k.Timeout("Timeout in sendViaJsonp."))},n.timeout)});return E=E.then(function(e){if(c.ServiceResponses.isError(e))throw new k.HttpError(e.httpStatusCode,e.errorMessage);return e}),a.Promise.race([E,H])},r.prototype.sendViaXmlHttpRequest=function(){if("undefined"==typeof XMLHttpRequest)return null;var n=new XMLHttpRequest;if(!("withCredentials"in n))return null;var p=r.appendQueryString(this._url,
"transport=XmlHttpRequest");this._httpMethod==h.HttpMethods.GET&&(p=r.appendQueryString(p,this._payload));n.open(this._httpMethod,p,!0);n.withCredentials=!0;n.timeout=this.timeout;n.setRequestHeader("Accept","application/json");n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");p=new a.Promise(function(y,E){n.onreadystatechange=function(){if(4==n.readyState)if(200<=n.status&&300>n.status)y(JSON.parse(n.responseText));else if(0==n.status)E(new k.Timeout("Timeout in sendViaXmlHttpRequest."));
else{var C=void 0,H=void 0;try{var e=JSON.parse(n.responseText);c.ServiceResponses.isError(e)&&(C=e.errorMessage);e.requestId&&(H=e.requestId)}catch(f){}E(new k.HttpError(n.status,C||n.responseText,H))}}});return this._httpMethod==h.HttpMethods.GET?n.send():n.send(this._payload),p},r.appendQueryString=function(n,p){return n+(n.match(/\?/)?"&":"?")+p},r.maxUrlLength=2036,r.jsonpRequestNumber=0,r}()},function(g,b,d){(function(a,c){g.exports=function(){function h(){for(var l=0;l<U;l+=2)(0,z[l])(z[l+
1]),z[l]=void 0,z[l+1]=void 0;U=0}function m(l,v){var I=arguments,G=this,M=new this.constructor(u);void 0===M[V]&&P(M);var N,S=G._state;return S?(N=I[S-1],w(function(){return J(S,M,N,G._result)})):H(G,M,l,v),M}function k(l){if(l&&"object"==typeof l&&l.constructor===this)return l;var v=new this(u);return p(v,l),v}function u(){}function r(l){try{return l.then}catch(v){return ca.error=v,ca}}function n(l,v,I){v.constructor===l.constructor&&I===m&&v.constructor.resolve===k?function(G,M){M._state===Z?E(G,
M._result):M._state===aa?C(G,M._result):H(M,void 0,function(N){return p(G,N)},function(N){return C(G,N)})}(l,v):I===ca?C(l,ca.error):void 0===I?E(l,v):"function"==typeof I?function(G,M,N){w(function(S){var X=!1,ba=function(Y,da,ha,ia){try{Y.call(da,ha,ia)}catch(ja){return ja}}(N,M,function(Y){X||(X=!0,M!==Y?p(S,Y):E(S,Y))},function(Y){X||(X=!0,C(S,Y))},S._label);!X&&ba&&(X=!0,C(S,ba))},G)}(l,v,I):E(l,v)}function p(l,v){l===v?C(l,new TypeError("You cannot resolve a promise with itself")):"function"==
typeof v||"object"==typeof v&&null!==v?n(l,v,r(v)):E(l,v)}function y(l){l._onerror&&l._onerror(l._result);e(l)}function E(l,v){l._state===W&&(l._result=v,l._state=Z,0!==l._subscribers.length&&w(e,l))}function C(l,v){l._state===W&&(l._state=aa,l._result=v,w(y,l))}function H(l,v,I,G){var M=l._subscribers,N=M.length;l._onerror=null;M[N]=v;M[N+Z]=I;M[N+aa]=G;0===N&&l._state&&w(e,l)}function e(l){var v=l._subscribers,I=l._state;if(0!==v.length){for(var G,M,N=l._result,S=0;S<v.length;S+=3)G=v[S],M=v[S+
I],G?J(I,G,M,N):M(N);l._subscribers.length=0}}function f(){this.error=null}function J(l,v,I,G){var M="function"==typeof I,N=void 0,S=void 0,X=void 0,ba=void 0;if(M){try{var Y=I(G)}catch(da){Y=(ea.error=da,ea)}if((N=Y)===ea?(ba=!0,S=N.error,N=null):X=!0,v===N)return void C(v,new TypeError("A promises callback cannot return that same promise."))}else N=G,X=!0;v._state!==W||(M&&X?p(v,N):ba?C(v,S):l===Z?E(v,N):l===aa&&C(v,N))}function P(l){l[V]=fa++;l._state=void 0;l._result=void 0;l._subscribers=[]}
function t(l,v){this._instanceConstructor=l;this.promise=new l(u);this.promise[V]||P(this.promise);O(v)?(this._input=v,this.length=v.length,this._remaining=v.length,this._result=Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&E(this.promise,this._result))):C(this.promise,Error("Array Methods must be provided an Array"))}function A(l){this[V]=fa++;this._result=this._state=void 0;this._subscribers=[];if(u!==l){if("function"!=
typeof l)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof A)(function(v,I){try{I(function(G){p(v,G)},function(G){C(v,G)})}catch(G){C(v,G)}})(this,l);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}var O=Array.isArray?Array.isArray:function(l){return"[object Array]"===Object.prototype.toString.call(l)},U=0,q=void 0,w=function(l,
v){z[U]=l;z[U+1]=v;2===(U+=2)&&(q?q(h):Q())},x=("undefined"!=typeof window?window:void 0)||{};x=x.MutationObserver||x.WebKitMutationObserver;var D="undefined"==typeof self&&void 0!==a&&"[object process]"==={}.toString.call(a),B="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,z=Array(1E3),L,K,T,R,F,Q=void 0;D?Q=function(){return a.nextTick(h)}:x?(T=0,R=new x(h),F=document.createTextNode(""),R.observe(F,{characterData:!0}),Q=function(){F.data=
T=++T%2}):B?((K=new MessageChannel).port1.onmessage=h,Q=function(){return K.port2.postMessage(0)}):(L=setTimeout,Q=function(){return L(h,1)});var V=Math.random().toString(36).substring(16),W=void 0,Z=1,aa=2,ca=new f,ea=new f,fa=0;return t.prototype._enumerate=function(){for(var l=this.length,v=this._input,I=0;this._state===W&&I<l;I++)this._eachEntry(v[I],I)},t.prototype._eachEntry=function(l,v){var I=this._instanceConstructor,G=I.resolve;G===k?(G=r(l),G===m&&l._state!==W?this._settledAt(l._state,
v,l._result):"function"!=typeof G?(this._remaining--,this._result[v]=l):I===A?(I=new I(u),n(I,l,G),this._willSettleAt(I,v)):this._willSettleAt(new I(function(M){return M(l)}),v)):this._willSettleAt(G(l),v)},t.prototype._settledAt=function(l,v,I){var G=this.promise;G._state===W&&(this._remaining--,l===aa?C(G,I):this._result[v]=I);0===this._remaining&&E(G,this._result)},t.prototype._willSettleAt=function(l,v){var I=this;H(l,void 0,function(G){return I._settledAt(Z,v,G)},function(G){return I._settledAt(aa,
v,G)})},A.all=function(l){return(new t(this,l)).promise},A.race=function(l){var v=this;return O(l)?new v(function(I,G){for(var M=l.length,N=0;N<M;N++)v.resolve(l[N]).then(I,G)}):new v(function(I,G){return G(new TypeError("You must pass an array to race."))})},A.resolve=k,A.reject=function(l){var v=new this(u);return C(v,l),v},A._setScheduler=function(l){q=l},A._setAsap=function(l){w=l},A._asap=w,A.prototype={constructor:A,then:m},A.polyfill=function(){var l=void 0;if(void 0!==c)l=c;else if("undefined"!=
typeof self)l=self;else try{l=Function("return this")()}catch(G){throw Error("polyfill failed because global object is unavailable in this environment");}var v=l.Promise;if(v){var I=null;try{I=Object.prototype.toString.call(v.resolve())}catch(G){}if("[object Promise]"===I&&!v.cast)return}l.Promise=A},A.Promise=A,A}()}).call(this,d(7),d(8))},function(g,b){function d(){throw Error("setTimeout has not been defined");}function a(){throw Error("clearTimeout has not been defined");}function c(e){if(n===
setTimeout)return setTimeout(e,0);if((n===d||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(f){try{return n.call(null,e,0)}catch(J){return n.call(this,e,0)}}}function h(){C&&y&&(C=!1,y.length?E=y.concat(E):H=-1,E.length&&m())}function m(){if(!C){var e=c(h);C=!0;for(var f=E.length;f;){y=E;for(E=[];++H<f;)y&&y[H].run();H=-1;f=E.length}y=null;C=!1;(function(J){if(p===clearTimeout)return clearTimeout(J);if((p===a||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(J);try{p(J)}catch(P){try{return p.call(null,
J)}catch(t){return p.call(this,J)}}})(e)}}function k(e,f){this.fun=e;this.array=f}function u(){}var r=g.exports={};try{var n="function"==typeof setTimeout?setTimeout:d}catch(e){n=d}try{var p="function"==typeof clearTimeout?clearTimeout:a}catch(e){p=a}!0;var y,E=[],C=!1,H=-1;r.nextTick=function(e){var f=Array(arguments.length-1);if(1<arguments.length)for(var J=1;J<arguments.length;J++)f[J-1]=arguments[J];E.push(new k(e,f));1!==E.length||C||c(m)};k.prototype.run=function(){this.fun.apply(null,this.array)};
r.title="browser";r.browser=!0;r.env={};r.argv=[];r.version="";r.versions={};r.on=u;r.addListener=u;r.once=u;r.off=u;r.removeListener=u;r.removeAllListeners=u;r.emit=u;r.prependListener=u;r.prependOnceListener=u;r.listeners=function(e){return[]};r.binding=function(e){throw Error("process.binding is not supported");};r.cwd=function(){return"/"};r.chdir=function(e){throw Error("process.chdir is not supported");};r.umask=function(){return 0}},function(g,b){var d=function(){return this}();try{d=d||(new Function("return this"))()}catch(a){"object"==
typeof window&&(d=window)}g.exports=d},function(g,b,d){g.exports=d(10)},function(g,b,d){g=function(){function a(){}return a.isError=function(c){return"ProtocolError"===c.status||"InternalServerError"===c.status},a.isValidationError=function(c){return"ValidationError"===c.status},a.isSuccess=function(c){return"Success"===c.status},a}();b.ServiceResponses=g},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});g=function(){function a(){}return a.GET="GET",a.POST="POST",a.PUT="PUT",a.DELETE=
"DELETE",a}();b.HttpMethods=g},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});g=function(){function a(){}return a.prototype.serialize=function(c,h){var m=[],k=!1;if("string"!=typeof c)for(var u in c)if(c.hasOwnProperty(u)){k=!0;var r=h?h+"."+u:u,n=c[u];if(Array.isArray(n))for(var p=0;p<n.length;p++)m.push(this.serialize(n[p],r+"["+p+"]"));else"object"==typeof n?m.push(this.serialize(n,r)):void 0!==n&&m.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}return k||null==c||m.push(encodeURIComponent(h?
h+"=":"")+encodeURIComponent(c)),m.filter(function(y){return y}).join("&")},a}();b.PayloadSerializer=new g},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});g=d(14);b.RequestError=g.RequestError;g=d(15);b.HttpError=g.HttpError;g=d(16);b.Timeout=g.Timeout;d=d(17);b.MultipleCallsToCreateError=d.MultipleCallsToCreateError},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0})},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});g=function(){return function(a,c,
h){this.statusCode=a;this.name="HttpError";this.message=c;this.requestId=h;try{throw Error();}catch(m){this.stack=m.stack}}}();b.HttpError=g},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});g=function(){return function(a){this.name="Timeout";this.message=a;try{throw Error();}catch(c){this.stack=c.stack}}}();b.Timeout=g},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});g=function(){return function(a){if(this.stack=null,null==a)throw Error("'settingsDiff' cannot be null");
this.name="MultipleCallsToCreateError";this.message="Multiple call for create. These settings are different from current: "+a.map(function(c){return c.key+": "+c.message}).join("; ")}}();b.MultipleCallsToCreateError=g},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});var a;g=function(){function c(h,m,k,u){this._pluses=/\+/g;this.MaxCookieExpirationDate=new Date(2038,1,19);this._navigator=h?h.navigator:navigator;this._document=h?h.document:document;this._domain=m;this._path=k;this._secure=
u}return c.prototype.remove=function(h,m){return null!=this.tryGet(h,a.Raw)&&(this.set(h,"",-1,a.Raw,m),!this.tryGet(h,a.Raw))},c.prototype.tryGetJson=function(h){return this.tryGet(h,a.Json)},c.prototype.tryGet=function(h,m){var k=null;void 0===m&&(m=a.String);var u=this._document.cookie;u=u?u.split("; "):[];for(var r=0,n=u.length;r<n;r++){var p=u[r].split("="),y=this.decode(p.shift(),m);p=p.join("=");if(h===y){k=this.read(p,m);break}}return k},c.prototype.setJson=function(h,m,k){return this.set(h,
m,k,a.Json)},c.prototype.set=function(h,m,k,u,r){void 0===u&&(u=a.String);-1!==k&&this.remove(h);var n=null;null!=k&&"number"==typeof k?(n=new Date).setTime(+n+864E5*k):null!=k&&k instanceof Date&&(n=k);k=null==r?this._domain:r;return k===this._document.domain&&(k=null),this._document.cookie=[this.encode(h,u),"=",this.stringifyCookieValue(m,u),null!=n?"; expires="+n.toUTCString():"","; path="+(null!=this._path?this._path:"/"),k?"; domain="+k:"",null!=this._secure&&this._secure?"; secure":""].join("")},
c.prototype.removeAcrossBaseDomain=function(h){var m=this.getBaseDomain();if(m){var k=this._document.domain.split(".");m=m.substring(1).split(".");for(m=k.length-m.length+1-1;0<=m;m--){var u="."+k.slice(m).join(".");this.remove(h,u)}}this.remove(h,this._document.domain)},c.prototype.isCookieEnabled=function(){try{if(this.isInternetExplorer()){this._document.cookie="testcookie=testcookie";var h=-1!==this._document.cookie.indexOf("testcookie=testcookie");return this.remove("testcookie"),h}h=!!this._navigator.cookieEnabled;
return void 0!==this._navigator.cookieEnabled||h||(this._document.cookie="testcookie=testcookie",h=-1!==this._document.cookie.indexOf("testcookie=testcookie"),this.remove("testcookie")),h}catch(m){return!1}},c.prototype.isInternetExplorer=function(){var h=this._navigator.userAgent;if(void 0===h)return!1;var m=h.indexOf("MSIE "),k=h.indexOf("Trident/");h=h.indexOf("Edge/");return 0<m||0<k||0<h},c.prototype.read=function(h,m){m!=a.Raw&&m!=a.String||0!==h.indexOf('"')||(h=h.slice(1,-1).replace(/\\"/g,
'"').replace(/\\\\/g,"\\"));try{switch(h=m==a.Raw?h:decodeURIComponent(h.replace(this._pluses," ")),m){case a.Raw:case a.String:return h;case a.Json:return JSON.parse(h);default:throw Error("Unknown format");}}catch(k){}},c.prototype.encode=function(h,m){switch(m){case a.Raw:return h;case a.Json:case a.String:return encodeURIComponent(h);default:throw Error("Unknown format");}},c.prototype.decode=function(h,m){switch(m){case a.Raw:return h;case a.Json:case a.String:return decodeURIComponent(h);default:throw Error("Unknown format");
}},c.prototype.stringifyCookieValue=function(h,m){switch(m){case a.Raw:case a.String:return this.encode(String(h),m);case a.Json:return this.encode(JSON.stringify(h),m);default:throw Error("Unknown format");}},c.prototype.setBaseDomain=function(){this._domain=this.getBaseDomain()},c.prototype.getBaseDomain=function(){return this._baseDomain||(this._baseDomain=this.computeBaseDomain()),this._baseDomain},c.prototype.computeBaseDomain=function(){if(!this.isCookieEnabled())return null;for(var h=this._document.domain?
"."+this._document.domain:"",m=h.length-1;;){if(0>=m)return null;for(;0<=m&&"."!==h[m];)m--;var k=h.substr(m);if(this._document.cookie="domaintest=value; path=/; domain="+k,-1!==this._document.cookie.indexOf("domaintest=value"))return this._document.cookie="domaintest=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain="+k,k;m--}},c}();b.Manager=g;(function(c){c[c.Json=0]="Json";c[c.String=1]="String";c[c.Raw=2]="Raw"})(a=b.Format||(b.Format={}))},function(g,b,d){Object.defineProperty(b,"__esModule",
{value:!0});g=function(){function a(c,h){this.dashamailDeviceUUIDName="dashamailDeviceUUID";this.mindboxDeviceUUIDName="mindboxDeviceUUID";this._window=h||window;this._cookieManager=c}return a.prototype.setSession=function(c){var h=new Date;h=new Date(h.getFullYear()+2,h.getMonth(),h.getDate());this._cookieManager.removeAcrossBaseDomain("DM-session");this._cookieManager.setJson("DM-session",c,h);try{this._window.localStorage["DM-session"]=JSON.stringify(c)}catch(m){}},a.prototype.getDeviceUUID=function(){var c=
this.tryGetDeviceUUID();if(null==c)throw Error("DeviceUUID not set");return c},a.prototype.tryGetDeviceUUID=function(){var c=this.tryGetDeviceUUIDFromLocalStorage();null==c&&(c=this._cookieManager.tryGet(this.mindboxDeviceUUIDName),null!=c&&(this._cookieManager.set(this.dashamailDeviceUUIDName,c,this._cookieManager.MaxCookieExpirationDate),this._cookieManager.removeAcrossBaseDomain(this.mindboxDeviceUUIDName)));null==c&&(c=this._cookieManager.tryGet(this.dashamailDeviceUUIDName));return c},a.prototype.tryGetDeviceUUIDFromLocalStorage=
function(){try{if(this._window.localStorage[this.mindboxDeviceUUIDName])return this._window.localStorage[this.mindboxDeviceUUIDName]!=this._window.localStorage[this.dashamailDeviceUUIDName]&&(this._window.localStorage[this.dashamailDeviceUUIDName]=this._window.localStorage[this.mindboxDeviceUUIDName],this._window.localStorage.removeItem(this.mindboxDeviceUUIDName)),this._window.localStorage[this.mindboxDeviceUUIDName];if(this._window.localStorage[this.dashamailDeviceUUIDName])return this._window.localStorage[this.dashamailDeviceUUIDName]}catch(c){return null}},
a.prototype.setDeviceUUID=function(c){this._cookieManager.removeAcrossBaseDomain(this.dashamailDeviceUUIDName);this._cookieManager.set(this.dashamailDeviceUUIDName,c,this._cookieManager.MaxCookieExpirationDate);this.setSession({deviceGuid:c});this.setDeviceUUIDToLocalStorage(c);this.removeOldLocalStorage()},a.prototype.setDeviceUUIDToLocalStorage=function(c){try{this._window.localStorage[this.dashamailDeviceUUIDName]=c}catch(h){}},a.prototype.removeOldLocalStorage=function(){try{this._window.localStorage.removeItem("DM-session")}catch(c){}},
a.prototype.isUsingDeviceUUIDInLocalStorage=function(){try{return!!this._window.localStorage[this.dashamailDeviceUUIDName]}catch(c){return!1}},a.prototype.deviceUUIDIsSet=function(){return!!this._cookieManager.tryGet(this.dashamailDeviceUUIDName)},a}();b.CustomerSessionStorage=g},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});var a=d(13),c=d(21);g=function(){function h(){this.logger=new c.LoggerStub}return h.prototype.logError=function(m,k){(console.error(m),m instanceof a.Timeout)?
this.logger.trackEvent("Timeout",k):m instanceof a.HttpError?400!==m.statusCode&&401!==m.statusCode&&403!==m.statusCode&&this.logger.trackException(m):m instanceof a.MultipleCallsToCreateError||this.logger.trackException(m)},h.prototype.trackEvent=function(m,k){this.logger.trackEvent(m,k)},h}();b.TrackerLogger=g},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});g=function(){function a(){}return a.prototype.trackException=function(c){},a.prototype.trackEvent=function(c){},a}();b.LoggerStub=
g},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});var a=d(1);b.compareSettings=function(c,h){var m,k=[];try{for(var u=a.__values(Object.keys(c)),r=u.next();!r.done;r=u.next()){var n=void 0,p=r.value,y=c,E=h;switch(p){case "serviceDomain":n=null;break;case "redirectedFrom":var C=y[p],H=E[p];n=C.requestUrl===H.requestUrl&&C.referrerUrl===H.referrerUrl?null:"redirectedFrom objects are different";break;default:n=y[p]===E[p]?null:y[p]+" !== "+E[p]}var e=null==n?null:{key:p,message:n};
null!=e&&k.push(e)}}catch(J){var f={error:J}}finally{try{r&&!r.done&&(m=u["return"])&&m.call(u)}finally{if(f)throw f.error;}}return 0===k.length?null:k}},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});var a=d(6),c=d(24),h=d(3);g=function(){function m(k,u,r,n){if(this.loadingModulePromise=null,this.previousCommandPromise=a.Promise.resolve(),this.isSupportedByBrowserCommand=function(p,y){return"isSupportedByBrowser"===p},null==k)throw Error("Settings cannot be null");if(null==u)throw Error("Storage cannot be null");
if(null==r)throw Error("UUID cannot be null");if(null==n)throw Error("Logger cannot be null");this.tS=k;this.sessionStorage=u;this.dUOPP=r;this.logger=n}return m.prototype.tryGetModuleCommand=function(k){var u=k.indexOf(".");if(0>=u)return null;var r=k.substr(0,u);return c.moduleExists(r)?{moduleName:r,command:k.substr(u+1)}:null},m.prototype.invokeModule=function(k,u){var r=this,n=k.moduleName,p=k.command;if(u instanceof Array&&1<u.length)throw Error("[DM.SDK] <"+n+"> Too many arguments for command.");
var y=u instanceof Array?u[0]:u,E=c.getModuleInfo(n).isSupportedByBrowser();if(this.isSupportedByBrowserCommand(p,y)){if(null==y||"function"!=typeof y.callback)throw Error("[DM.SDK] <"+n+'> Callback for command "isSupportedByBrowser" not set.');y.callback(E)}else E&&this.moduleThen(n,function(C){if(void 0===C[p])throw Error("[DM.SDK] <"+n+'> Unknown command "'+p+'".');return C[p](r.tS,r.sessionStorage.getDeviceUUID(),y)})},m.prototype.moduleThen=function(k,u){var r=this,n=this.dUOPP();if(null==n)throw Error("Previous request promise is expected to be set. 'dashamail(\"create\")' is expected to be called ahead of every other command");
if(null==this.loadingModulePromise){var p=new a.Promise(function(y,E){c.loadModule(r.tS,k,h.version,r.logger).then(function(C){return y(C)},function(C){return E(C)})});this.loadingModulePromise=a.Promise.all([p,n]).then(function(y){return y[0]},function(y){return a.Promise.reject(y)})}this.loadingModulePromise.then(function(y){r.previousCommandPromise=r.previousCommandPromise.then(function(){return new a.Promise(function(E){u(y).then(E,function(C){r.logger.logError(C);E()})})})},function(y){return r.logger.logError(y)})},
m}();b.ModuleManager=g},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});var a;d(25);d(22);d(26);(function(k){k.NotLoaded="NotLoaded";k.Loading="Loading";k.Loaded="Loaded";k.Failed="Failed"})(a||(a={}));var c={},h=function(k){var u=c[k];if(null==u)throw Error("[DM.SDK] <core> Module "+k+" is not registered.");return u};b.getModuleInfo=function(k){return h(k).moduleInfo};b.moduleExists=function(k){return k in c};b.loadModule=function(k,u,r,n){var p=h(u);switch(p.loadingState){case a.Loaded:return Promise.resolve(m(p.moduleInfo));
case a.Loading:return p.loadingPromise;case a.NotLoaded:return p.loadingState=a.Loading,p.loadingPromise=new Promise(function(y,E){var C=document.createElement("script");C.src=(k.useHttp?"http":"https")+"://"+(null!=k.serviceDomain?k.serviceDomain:"directcrm.dashamail.com")+"/scripts/modules/"+p.moduleInfo.src+"?version="+r;C.async=!0;var H=function(){try{p.loadingState=a.Loaded,y(m(p.moduleInfo))}catch(f){p.loadingState=a.Failed,p.loadingError=f,E(f)}},e={"Module name":p.moduleInfo.name};C.onload=
function(){null==window.dashamail[p.moduleInfo.name]?(n.trackEvent("Loading module in another loop",e),setTimeout(function(){null==window.dashamail[p.moduleInfo.name]?n.trackEvent("Couldn't load module in another loop",e):n.trackEvent("Have loaded module in another loop",e);H()},5E3)):H()};C.onerror=function(){E(Error("[DM.SDK] <core> There was an error during loading of '"+u+"' module"))};try{document.head.insertAdjacentElement("beforeend",C)}catch(f){E(f)}}),p.loadingPromise;case a.Failed:return p.loadingPromise;
default:throw Error("[DM.SDK] <core> Unknown module loading state "+p.loadingState+".");}};var m=function(k){var u=window.dashamail[k.name];if(null==u)throw Error("[DM.SDK] <core> Expected module not found in dashamail["+k.name+"]");return u}},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0})},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0})},function(g,b,d){Object.defineProperty(b,"__esModule",{value:!0});g=function(){function a(){}return a.prototype.tryGetTimeZone=
function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(c){return null}},a}();b.IanaTimeZoneProvider=g}]);